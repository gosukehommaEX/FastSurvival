% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/overallResults.R
\name{overallResults}
\alias{overallResults}
\title{Overall results summary with adaptive stopping probabilities for clinical trial data}
\usage{
overallResults(
  data,
  futility_bounds,
  futility_bounds_type,
  efficacy_bounds,
  efficacy_bounds_type
)
}
\arguments{
\item{data}{A tibble containing overall summary data generated by \code{\link{overallSummary}}.
Must contain columns: simID, analysis, analysis_time, lr_statistic, lr_pvalue,
hazard_ratio, n_total, n_control, n_treatment, events_total, events_control, events_treatment.}

\item{futility_bounds}{A numeric vector specifying the futility stopping boundaries
for each analysis. Length must match the number of analyses. Use NA to skip
futility assessment at specific analyses.}

\item{futility_bounds_type}{A character string specifying the type of futility boundary.
Must be one of "hr" (hazard ratio), "test_statistic" (log-rank statistic), or
"p_val" (p-value).}

\item{efficacy_bounds}{A numeric vector specifying the efficacy stopping boundaries
for each analysis. Length must match the number of analyses. Use NA to skip
efficacy assessment at specific analyses.}

\item{efficacy_bounds_type}{A character string specifying the type of efficacy boundary.
Must be one of "test_statistic" (log-rank statistic) or "p_val" (p-value).}
}
\value{
A tibble containing overall results summary with the following columns:
\describe{
\item{analysis}{Analysis number}
\item{analysis_time}{Mean analysis cutoff time across simulations}
\item{n_total}{Mean total number of patients across simulations}
\item{n_control}{Mean number of patients in control group across simulations}
\item{n_treatment}{Mean number of patients in treatment group across simulations}
\item{events_total}{Mean total number of events across simulations}
\item{events_control}{Mean number of events in control group across simulations}
\item{events_treatment}{Mean number of events in treatment group across simulations}
\item{prob_futility_stop}{Probability of futility stopping at this analysis}
\item{cumu_prob_futility_stop}{Cumulative probability of futility stopping up to this analysis}
\item{prob_efficacy_stop}{Probability of efficacy stopping at this analysis}
\item{cumu_prob_efficacy_stop}{Cumulative probability of efficacy stopping up to this analysis}
}
}
\description{
This function calculates futility and efficacy stopping probabilities for adaptive
clinical trial designs based on data generated by \code{\link{overallSummary}}.
It provides both interim-specific and cumulative stopping probabilities along with
descriptive statistics for each analysis timepoint.
}
\details{
This function implements adaptive trial stopping rules by:

\describe{
\item{Futility Stopping}{
Based on the specified futility_bounds_type:
\itemize{
\item "hr": Stop if hazard_ratio > futility_bounds
\item "test_statistic": Stop if lr_statistic > futility_bounds
\item "p_val": Stop if lr_pvalue > futility_bounds
}
}
\item{Efficacy Stopping}{
Based on the specified efficacy_bounds_type:
\itemize{
\item "test_statistic": Stop if lr_statistic < efficacy_bounds
\item "p_val": Stop if lr_pvalue < efficacy_bounds
}
}
\item{Trial Continuation}{
Trial continues to next analysis only if neither futility nor efficacy
stopping criteria are met at the current analysis.
}
}

The function processes simulations sequentially through analyses, tracking
which trials stop at each timepoint and calculating both interim and cumulative
stopping probabilities.
}
\examples{
library(dplyr)

# Generate trial data
trial_data <- simTrial(
  nsim = 1000,
  N = list(control = 100, treatment = 100),
  a.time = c(0, 18),
  intensity = 200/18,
  e.time = list(control = c(0, Inf), treatment = c(0, Inf)),
  e.hazard = list(control = 0.08, treatment = 0.05),
  d.time = list(control = c(0, Inf), treatment = c(0, Inf)),
  d.hazard = list(control = 0.01, treatment = 0.01),
  seed = 123
)

# Create analysis datasets
analysis_data <- analysisData(trial_data, E = c(50, 100, 150))

# Generate overall summary
overall_data <- overallSummary(analysis_data, control = 1, side = 1, hr_est_method = "LR")

# Define stopping boundaries
futility_bounds <- c(0.8, NA, 1.2)  # HR-based futility at analyses 1 and 3
efficacy_bounds <- c(NA, 0.025, 0.05)  # p-value-based efficacy at analyses 2 and 3

# Calculate stopping probabilities
results <- overallResults(
  data = overall_data,
  futility_bounds = futility_bounds,
  futility_bounds_type = "hr",
  efficacy_bounds = efficacy_bounds,
  efficacy_bounds_type = "p_val"
)

print(results)

}
\seealso{
\code{\link{overallSummary}} for generating the input overall summary data,
\code{\link{analysisData}} for creating analysis datasets
}
