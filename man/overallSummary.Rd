% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/overallSummary.R
\name{overallSummary}
\alias{overallSummary}
\title{Overall population statistical analysis summary for clinical trial data}
\usage{
overallSummary(data, control = 1, side = 2, hr_est_method = "Cox")
}
\arguments{
\item{data}{A data.table containing analysis data generated by \code{\link{analysisData}}.
Must contain columns: simID, analysis, group, tte, event, analysis.time.}

\item{control}{A numeric value indicating which value in \code{group} represents
the control group. Default is 1.}

\item{side}{A numeric value indicating the type of test: 1 for one-sided test,
2 for two-sided test. Default is 2.}

\item{hr_est_method}{A character string specifying the hazard ratio estimation method.
Must be one of "PY", "Pike", "Peto", "LR", or "Cox". Default is "Cox".}
}
\value{
A data.table containing overall population analysis results with the following columns:
\describe{
\item{simID}{Simulation iteration ID}
\item{analysis}{Analysis number}
\item{subgroup}{Always "Overall" for overall population}
\item{analysis_time}{Analysis cutoff time (calendar time from study start)}
\item{lr_statistic}{Log-rank test statistic}
\item{lr_pvalue}{Log-rank test p-value (one-sided or two-sided based on side parameter)}
\item{hazard_ratio}{Estimated hazard ratio}
\item{hr_method}{Method used for hazard ratio estimation}
\item{n_total}{Total number of patients}
\item{n_control}{Number of patients in control group}
\item{n_treatment}{Number of patients in treatment group}
\item{events_total}{Total number of events}
\item{events_control}{Number of events in control group}
\item{events_treatment}{Number of events in treatment group}
}
}
\description{
This function performs overall population statistical analysis on clinical trial data
generated by \code{\link{analysisData}}. It calculates log-rank test statistics,
p-values, hazard ratios, patient counts, event counts, and analysis times using
data.table for maximum performance.
}
\details{
This function provides overall population summary of clinical trial results by:

\describe{
\item{Log-rank Test}{
Performs log-rank test using \code{\link{lrtest}} for the overall population
at each analysis timepoint. Returns test statistic and p-value based on the side parameter.
}
\item{Hazard Ratio Estimation}{
Calculates hazard ratios using \code{\link{esthr}} for the overall population
using the specified method.
}
\item{Patient and Event Counts}{
Summarizes patient numbers and event numbers by group for the overall population.
}
\item{Analysis Time}{
Records the analysis cutoff time for each analysis.
}
}

All calculations are performed using data.table for maximum efficiency and are
stratified by simulation ID and analysis number.
}
\examples{
library(data.table)

# Generate trial data
trial_data <- simTrial(
  nsim = 50,
  N = list(control = 100, treatment = 100),
  a.time = c(0, 18),
  intensity = 200/18,
  e.time = list(control = c(0, Inf), treatment = c(0, Inf)),
  e.hazard = list(control = 0.08, treatment = 0.05),
  d.time = list(control = c(0, Inf), treatment = c(0, Inf)),
  d.hazard = list(control = 0.01, treatment = 0.01),
  seed = 123
)

# Create analysis datasets
analysis_data <- analysisData(trial_data, E = c(50, 100, 150))

# Generate overall population summary
overall_results <- overallSummary(analysis_data, control = 1, side = 2, hr_est_method = "Cox")

# View results for first simulation
print(overall_results[simID == 1])

# Example with subgroups
subgroup_trial <- simTrial(
  nsim = 30,
  N = list(
    control = c(A = 50, B = 50),
    treatment = c(A = 50, B = 50)
  ),
  a.time = c(0, 18),
  intensity = 200/18,
  e.time = list(
    control = list(A = c(0, Inf), B = c(0, Inf)),
    treatment = list(A = c(0, Inf), B = c(0, Inf))
  ),
  e.hazard = list(
    control = list(A = 0.08, B = 0.12),
    treatment = list(A = 0.05, B = 0.08)
  ),
  d.time = NULL,  # No dropout
  d.hazard = NULL
)

subgroup_analysis <- analysisData(subgroup_trial, E = c(50, 100))
subgroup_overall <- overallSummary(subgroup_analysis, control = 1)

}
\seealso{
\code{\link{analysisData}} for creating the input analysis datasets,
\code{\link{lrtest}} for log-rank test implementation,
\code{\link{esthr}} for hazard ratio estimation,
\code{\link{subgroupSummary}} for subgroup analysis
}
